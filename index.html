<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BROKIAN - Soluciones para Compras Empresariales Urgentes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Colores personalizados */
        .bg-brokian-green { background-color: #3d5a49; }
        .text-brokian-green { color: #3d5a49; }
        .border-brokian-green { border-color: #3d5a49; }
        .ring-brokian-green { ring-color: #3d5a49; }
        .bg-brokian-green-dark { background-color: #2f4538; }
        .hover\:bg-brokian-green-dark:hover { background-color: #2f4538; }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px; /* Offset for sticky header */
        }
        
        /* Modernización de la barra de scroll */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #adb5bd; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #888; }
        
        /* Animaciones de scroll */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Efecto Aurora para Hero Section */
        #hero-section::before, #hero-section::after {
            content: '';
            position: absolute;
            z-index: 1;
            filter: blur(100px);
            opacity: 0.2;
            pointer-events: none;
        }

        #hero-section::before {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background-color: #3d5a49;
            top: 10%;
            left: 15%;
            animation: pulse 8s infinite ease-in-out;
        }

        #hero-section::after {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background-color: #adb5bd;
            bottom: 15%;
            right: 20%;
            animation: pulse 10s infinite ease-in-out -2s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3 cursor-pointer" onclick="window.scrollTo({top: 0, behavior: 'smooth'});">
                <svg width="40" height="40" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-10 h-10"><g transform="rotate(45 50 50)"><rect x="15" y="15" width="40" height="40" rx="5" ry="5" fill="#3d5a49" stroke="none"/><rect x="45" y="45" width="40" height="40" rx="5" ry="5" fill="#adb5bd" stroke="none"/><rect x="15" y="45" width="40" height="40" rx="5" ry="5" fill="#adb5bd" stroke="none"/><rect x="45" y="15" width="40" height="40" rx="5" ry="5" fill="#3d5a49" stroke="none"/></g></svg>
                <span class="text-2xl font-bold text-gray-800 tracking-tight">BROKIAN</span>
            </div>
            <div class="hidden md:flex items-center space-x-8 font-medium">
                <a href="#como-funciona" class="text-gray-600 hover:text-brokian-green transition-colors">Cómo Funciona</a>
                <a href="#beneficios" class="text-gray-600 hover:text-brokian-green transition-colors">Beneficios</a>
                <a href="#ai-assistant" class="text-gray-600 hover:text-brokian-green transition-colors">Asistente IA</a>
                <a href="#contacto" class="text-gray-600 hover:text-brokian-green transition-colors">Contacto</a>
            </div>
            <a href="#contacto" class="hidden md:block bg-brokian-green text-white px-5 py-2 rounded-lg font-semibold hover:bg-brokian-green-dark transition-all shadow-md hover:shadow-lg hover:-translate-y-0.5 transform">
                Solicitar Cotización
            </a>
            <div class="md:hidden">
                <a href="#contacto" class="bg-brokian-green text-white px-4 py-2 rounded-lg font-semibold hover:bg-brokian-green-dark transition-colors shadow-sm">
                    Contacto
                </a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section id="hero-section" class="relative bg-white overflow-hidden">
            <div class="container mx-auto px-6 py-24 md:py-32 text-center relative z-10">
                <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight tracking-tighter">
                    Tu Socio Estratégico para <span class="text-brokian-green">Compras Urgentes</span>
                </h1>
                <p class="mt-6 text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
                    Resolvemos las eventualidades de tu empresa con agilidad y eficiencia. Publicá tu necesidad y nosotros nos encargamos del resto.
                </p>
                <a href="#contacto" class="mt-10 inline-block bg-brokian-green text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-brokian-green-dark transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
                    Publicá tu Necesidad Ahora
                </a>
            </div>
        </section>

        <!-- Cómo Funciona Section -->
        <section id="como-funciona" class="py-24 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 animate-on-scroll">
                    <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-gray-900">Simplificamos tus Compras en 4 Pasos</h2>
                    <p class="mt-4 text-gray-600 max-w-2xl mx-auto text-lg">La solución que necesitás, sin complicaciones y en tiempo récord.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-white p-8 rounded-2xl shadow-lg text-center transition-all duration-300 hover:shadow-xl hover:-translate-y-1.5 animate-on-scroll">
                        <div class="flex items-center justify-center h-16 w-16 bg-brokian-green/10 rounded-full mx-auto mb-6 ring-8 ring-brokian-green/5"><span class="text-2xl font-bold text-brokian-green">1</span></div>
                        <h3 class="text-xl font-semibold mb-2">Publicás tu Pedido</h3>
                        <p class="text-gray-600">Describís tu necesidad en nuestro sistema de forma rápida y sencilla.</p>
                    </div>
                    <div class="bg-white p-8 rounded-2xl shadow-lg text-center transition-all duration-300 hover:shadow-xl hover:-translate-y-1.5 animate-on-scroll" style="transition-delay: 100ms;">
                        <div class="flex items-center justify-center h-16 w-16 bg-brokian-green/10 rounded-full mx-auto mb-6 ring-8 ring-brokian-green/5"><span class="text-2xl font-bold text-brokian-green">2</span></div>
                        <h3 class="text-xl font-semibold mb-2">Buscamos la Solución</h3>
                        <p class="text-gray-600">Activamos nuestra red de proveedores para encontrar la opción ideal.</p>
                    </div>
                    <div class="bg-white p-8 rounded-2xl shadow-lg text-center transition-all duration-300 hover:shadow-xl hover:-translate-y-1.5 animate-on-scroll" style="transition-delay: 200ms;">
                        <div class="flex items-center justify-center h-16 w-16 bg-brokian-green/10 rounded-full mx-auto mb-6 ring-8 ring-brokian-green/5"><span class="text-2xl font-bold text-brokian-green">3</span></div>
                        <h3 class="text-xl font-semibold mb-2">Recibís una Propuesta</h3>
                        <p class="text-gray-600">Te presentamos una oferta competitiva y transparente, sin sorpresas.</p>
                    </div>
                    <div class="bg-white p-8 rounded-2xl shadow-lg text-center transition-all duration-300 hover:shadow-xl hover:-translate-y-1.5 animate-on-scroll" style="transition-delay: 300ms;">
                        <div class="flex items-center justify-center h-16 w-16 bg-brokian-green/10 rounded-full mx-auto mb-6 ring-8 ring-brokian-green/5"><span class="text-2xl font-bold text-brokian-green">4</span></div>
                        <h3 class="text-xl font-semibold mb-2">Gestionamos la Entrega</h3>
                        <p class="text-gray-600">Nos ocupamos de todo: cierre, facturación y entrega garantizada.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Beneficios Section -->
        <section id="beneficios" class="py-24 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 animate-on-scroll">
                    <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-gray-900">La Solución Eficiente para tu Organización</h2>
                    <p class="mt-4 text-gray-600 max-w-2xl mx-auto text-lg">Olvidate de la burocracia y la pérdida de tiempo. Con BROKIAN, ganás un aliado estratégico.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                    <div class="flex items-start space-x-5 animate-on-scroll">
                        <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-xl bg-brokian-green text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div>
                        <div><h3 class="text-xl font-semibold">Soluciones Rápidas y Confiables</h3><p class="mt-1 text-gray-600">Damos respuesta inmediata a tus necesidades urgentes para que tu operación no se detenga.</p></div>
                    </div>
                    <div class="flex items-start space-x-5 animate-on-scroll" style="transition-delay: 100ms;">
                         <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-xl bg-brokian-green text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M4 10a4 4 0 118 0 4 4 0 01-8 0z"></path></svg></div>
                        <div><h3 class="text-xl font-semibold">Red de Proveedores Verificados</h3><p class="mt-1 text-gray-600">Accedé a una red de confianza para garantizar calidad y cumplimiento.</p></div>
                    </div>
                    <div class="flex items-start space-x-5 animate-on-scroll" style="transition-delay: 200ms;">
                         <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-xl bg-brokian-green text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                        <div><h3 class="text-xl font-semibold">Optimización de Costos</h3><p class="mt-1 text-gray-600">Negociamos para conseguir el mejor precio. Convertimos un problema en una compra inteligente.</p></div>
                    </div>
                    <div class="flex items-start space-x-5 animate-on-scroll" style="transition-delay: 300ms;">
                         <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-xl bg-brokian-green text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div>
                        <div><h3 class="text-xl font-semibold">Gestión Integral y Garantías</h3><p class="mt-1 text-gray-600">Nos encargamos de la facturación y documentación. Te entregamos una solución completa.</p></div>
                    </div>
                     <div class="flex items-start space-x-5 animate-on-scroll" style="transition-delay: 400ms;">
                         <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-xl bg-brokian-green text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10m16-10v10M4 10h16M4 14h16M10 4v16m4-16v16"></path></svg></div>
                        <div><h3 class="text-xl font-semibold">Sin Inmovilizar Stock</h3><p class="mt-1 text-gray-600">Actuamos como un intermediario eficiente. No aumentás costos fijos ni inmovilizás capital.</p></div>
                    </div>
                    <div class="flex items-start space-x-5 animate-on-scroll" style="transition-delay: 500ms;">
                         <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-xl bg-brokian-green text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>
                        <div><h3 class="text-xl font-semibold">Un Socio, no un Proveedor</h3><p class="mt-1 text-gray-600">Nos convertimos en una extensión de tu equipo, aportando soluciones cuando más las necesitás.</p></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gemini AI Assistant Section -->
        <section id="ai-assistant" class="py-24 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 animate-on-scroll">
                    <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-gray-900">¿No sabés cómo detallar tu pedido?</h2>
                    <p class="mt-4 text-gray-600 max-w-3xl mx-auto text-lg">Usá nuestro asistente con IA para transformar tu idea en un requerimiento profesional listo para cotizar.</p>
                </div>
                <div class="max-w-3xl mx-auto bg-white p-8 rounded-2xl shadow-xl animate-on-scroll">
                    <div class="space-y-6">
                        <div>
                            <label for="user-request" class="block text-sm font-medium text-gray-700 mb-2">Describí tu necesidad aquí:</label>
                            <textarea id="user-request" rows="4" class="block w-full rounded-xl border-gray-300 shadow-sm focus:border-brokian-green focus:ring focus:ring-brokian-green focus:ring-opacity-50 transition" placeholder="Ej: Necesito 50 buzos con capucha para el club, con nuestro logo bordado adelante. Los necesitamos para fin de mes."></textarea>
                        </div>
                        <button id="generate-button" class="w-full flex justify-center items-center bg-gradient-to-r from-brokian-green to-brokian-green-dark text-white px-6 py-3 rounded-xl font-bold hover:opacity-90 transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5 disabled:bg-gray-400 disabled:scale-100 disabled:shadow-none">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                            Generar Requerimiento Detallado
                        </button>
                        <div id="loading-spinner" class="hidden text-center py-4"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-brokian-green mx-auto"></div><p class="mt-3 text-gray-600">Analizando tu pedido...</p></div>
                        <div id="result-container" class="hidden mt-6">
                             <div class="p-6 bg-green-50/50 border border-green-200 rounded-xl"><div class="flex justify-between items-center mb-4"><h4 class="font-semibold text-lg text-gray-800">Sugerencia de Requerimiento:</h4><button id="copy-button" class="bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md font-semibold hover:bg-gray-300 transition text-sm">Copiar</button></div><pre id="ai-result" class="text-gray-700 whitespace-pre-wrap font-sans bg-white p-4 rounded-lg border"></pre></div>
                        </div>
                        <div id="error-message" class="hidden mt-4 p-4 bg-red-100 border border-red-300 text-red-800 rounded-lg text-center"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section id="contacto" class="bg-gradient-to-br from-[#3d5a49] to-[#2c4036]">
            <div class="container mx-auto px-6 py-24 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-white tracking-tight">¿Tenés un requerimiento urgente?</h2>
                <p class="mt-4 text-lg text-gray-200 max-w-2xl mx-auto">Dejalo en nuestras manos. Somos el socio que aporta soluciones cuando más lo necesitan.</p>
                <div class="mt-10 bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl inline-block max-w-lg text-left w-full">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Contactanos Directamente</h3>
                    <div class="space-y-5">
                        <div class="flex items-center space-x-4"><svg class="w-6 h-6 text-brokian-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg><a href="mailto:brokian.comercial@gmail.com" class="text-gray-700 hover:text-brokian-green transition text-lg">brokian.comercial@gmail.com</a></div>
                        <div class="flex items-center space-x-4"><svg class="w-6 h-6 text-brokian-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg><span class="text-gray-700 text-lg">11 6253-7704</span></div>
                        <div class="flex items-center space-x-4"><svg class="w-6 h-6 text-brokian-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-6 0h6"></path></svg><span class="text-gray-700 text-lg">CUIT: 20-38100650-7</span></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white">
        <div class="container mx-auto px-6 py-8 text-center"><div class="flex justify-center items-center space-x-3 mb-4"><svg width="32" height="32" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-8 h-8"><g transform="rotate(45 50 50)"><rect x="15" y="15" width="40" height="40" rx="5" ry="5" fill="#3d5a49" stroke="none"/><rect x="45" y="45" width="40" height="40" rx="5" ry="5" fill="#adb5bd" stroke="none"/><rect x="15" y="45" width="40" height="40" rx="5" ry="5" fill="#adb5bd" stroke="none"/><rect x="45" y="15" width="40" height="40" rx="5" ry="5" fill="#3d5a49" stroke="none"/></g></svg><span class="text-xl font-bold tracking-tight">BROKIAN</span></div><p class="text-gray-400">El socio que aporta soluciones cuando más lo necesitan.</p><p class="mt-6 text-sm text-gray-500">&copy; 2024 BROKIAN. Todos los derechos reservados.</p></div>
    </footer>

    <script>
        // --- Gemini API Logic ---
        const generateButton = document.getElementById('generate-button');
        const userRequestInput = document.getElementById('user-request');
        const resultContainer = document.getElementById('result-container');
        const aiResult = document.getElementById('ai-result');
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessage = document.getElementById('error-message');
        const copyButton = document.getElementById('copy-button');

        async function fetchWithRetry(url, options, retries = 3, initialDelay = 1000) {
            let delay = initialDelay;
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.ok) return response;
                    if (response.status >= 400 && response.status < 500) throw new Error(`Error del cliente: ${response.status}`);
                    const error = new Error(`Error del servidor: ${response.status}`);
                    if (i === retries - 1) throw error;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                } catch (error) {
                    if (i === retries - 1) throw error;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
        }

        generateButton.addEventListener('click', async () => {
            const userQuery = userRequestInput.value.trim();
            if (!userQuery) {
                errorMessage.textContent = 'Por favor, describe tu necesidad en el campo de texto.';
                errorMessage.classList.remove('hidden');
                resultContainer.classList.add('hidden');
                return;
            }

            loadingSpinner.classList.remove('hidden');
            resultContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');
            generateButton.disabled = true;

            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const systemPrompt = `Actúa como un asistente experto en compras y adquisiciones para una empresa argentina llamada BROKIAN. Tu tarea es tomar el requerimiento simple de un cliente y transformarlo en una solicitud de cotización (RFQ) formal, clara y detallada, lista para ser enviada a proveedores. Estructura la respuesta en los siguientes puntos clave: 1. Producto/Servicio Solicitado, 2. Resumen del Pedido, 3. Especificaciones Técnicas Detalladas (Material, Dimensiones/Talles, Color, Personalización, Calidad), 4. Cantidad, 5. Fecha de Entrega Límite, 6. Lugar de Entrega, 7. Consideraciones Adicionales. Si falta un dato crucial, indícalo como "[A DEFINIR]". El tono debe ser profesional y conciso.`;

            const payload = { contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] } };

            try {
                const response = await fetchWithRetry(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    aiResult.textContent = candidate.content.parts[0].text;
                    resultContainer.classList.remove('hidden');
                } else {
                    throw new Error('La respuesta de la IA no contiene texto válido.');
                }
            } catch (error) {
                console.error('Error al llamar a la API de Gemini:', error);
                errorMessage.textContent = 'Hubo un problema al generar la sugerencia. Por favor, intentá de nuevo más tarde.';
                errorMessage.classList.remove('hidden');
            } finally {
                loadingSpinner.classList.add('hidden');
                generateButton.disabled = false;
            }
        });

        copyButton.addEventListener('click', () => {
            const textToCopy = aiResult.textContent;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            try {
                document.execCommand('copy');
                copyButton.textContent = '¡Copiado!';
                setTimeout(() => { copyButton.textContent = 'Copiar'; }, 2000);
            } catch (err) {
                console.error('No se pudo copiar el texto: ', err);
            }
            document.body.removeChild(tempTextArea);
        });
        
        // --- Scroll Animation Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, {
                threshold: 0.1
            });

            const elementsToAnimate = document.querySelectorAll('.animate-on-scroll');
            elementsToAnimate.forEach(el => {
                observer.observe(el);
            });
        });
    </script>
</body>
</html>

